---
layout: post
title: "“If It Ain’t Broke…” – Why Good Code Doesn’t Guarantee Happy Users"
date: '2010-10-26T02:23:00.001+01:00'
author: Dylan Beattie
tags:
- sagepay agile tdd
modified_time: '2010-11-07T01:07:25.460Z'
thumbnail: http://lh6.ggpht.com/_de7B8BtZZIw/TMWYR8F5AxI/AAAAAAAAADk/BmtEcSFPysw/s72-c/image_thumb%5B4%5D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-7295454224203070190.post-326293442142061444
blogger_orig_url: http://www.dylanbeattie.net/2010/10/if-it-aint-broke-why-good-code-doesnt.html
redirect_from: "/2010/10/if-it-aint-broke-why-good-code-doesnt.html"

---

<p>For years, my sites have processed online payments using a firm called Protx. Protx was acquired by Sage a few years back, rebranded as <a href="http://www.sagepay.com/">SagePay</a>, and since then they’ve been gradually making changes to their system. Nothing too drastic, and always with plenty of warning that changes were forthcoming. Their payment API is generally rock-solid, powerful, flexible, and has allowed us to cope with all sorts of complicated payment scenarios without too much fuss. So far, so good.</p>  <p>About two months ago, SagePay announced that a preview of their new administration system was running on their test servers, and they invited everyone to go and have a look. Their old system was kinda clunky, but it worked, and our accounts team had been using it quite happily for years. So I went. I looked. The new system had lots of shiny Ajax – OK, fair enough, this is 2010 after all – and horizontal scrolling. No, really. Check this out:</p>  <p><a href="http://lh5.ggpht.com/_de7B8BtZZIw/TMWYRsMxWHI/AAAAAAAAADg/jCmZCnP_W0k/s1600-h/image%5B6%5D.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/_de7B8BtZZIw/TMWYR8F5AxI/AAAAAAAAADk/BmtEcSFPysw/image_thumb%5B4%5D.png?imgmax=800" width="335" height="258" /></a></p>  <p>I have a 1600x1200 screen because information is nice  and I like being able to see lots of it at once. SagePay have decided, for some reason, that our payment transactions are best presented in a fixed-size 800x300px window. Fine, though – that’s what technical previews are for; lots of people reported this and were <a href="https://support.sagepay.com/forum/Topic11656-26-2.aspx#bm11685">assured it would be sorted out</a>. </p>  <p>Well, the new system launched over the weekend. The old one’s gone, they new one’s live, and things like the horizontal scrolling have <em>not</em> been sorted out, and customers’ reactions to the new system is, well, a bit negative. A thread <a href="https://support.sagepay.com/forum/Topic11656-26-2.aspx">on their support forums</a> is full of gems like:</p>  <blockquote>   <p>“A complete crock. Should be rolled back immediately.” (<a href="https://support.sagepay.com/forum/FindPost11697.aspx">here</a>)</p>    <p>“this is a complete and utter disaster. This system needs rolling back as soon as possible.” (<a href="https://support.sagepay.com/forum/FindPost11699.aspx">here</a>)</p>    <p>“The system is rejecting the order because of the delivery address line 2 which contained 58-62 xxxxx Road. Your system is not allowing the - in the address (This address is the formatted address that is provided by Royal Mail). This needs to be fixed quickly.” (<a href="https://support.sagepay.com/forum/FindPost11707.aspx">here</a>)</p> </blockquote>  <p>OK, fine. Big company rolls out shiny upgrade, upsets customers, breaks APIs, whatever. Big companies do this a lot. </p>  <p>But - I was expecting something different here, because last week, Mat – SagePay’s “Chief Nerd” – published <a href="http://sagepay.wordpress.com/2010/10/18/if-it-aint-broke/">this blog post</a>, in which he talks quite rationally and eloquently about the forthcoming improvements. And it sounds like quite good stuff, too. Stuff like:</p>  <blockquote>   <p>“To accommodate this we’ve changed the way we develop software, not only at a language level, but also at the process level.  We’ve embraced Test Driven Development, Agile methodologies, Continuous Integration and parallel automated testing.”</p>    <p>“By writing tests first and only then writing code that passes those tests, we know that our software does what it is supposed to.”</p>    <p>“This demonstrable code quality gives our developers much more confidence in their code, frees them to refactor software that behaves sub-optimally, and ensures the test team’s time isn’t wasted on trivial bugs.”</p>    <p align="right"> (quotes from <a title="http://sagepay.wordpress.com/2010/10/18/if-it-aint-broke/" href="http://sagepay.wordpress.com/2010/10/18/if-it-aint-broke/">http://sagepay.wordpress.com/2010/10/18/if-it-aint-broke/</a>)</p> </blockquote>  <p>OK. Mat, I believe you. If your comments about improved capacity and security are correct, this actually represents a huge achievement for the SagePay technical team. But I have to wonder… if the chief nerd is doing everything right, why are the customers so upset?</p>  <div style="padding-bottom: 8px; line-height: 2em; padding-left: 8px; width: 240px; padding-right: 8px; float: left; font-size: large; margin-right: 8px; border-right: #999999 1px solid; padding-top: 8px">   <p align="center"><span ><span >“</span><strong><span >…if the</span>          
CHIEF NERD          
<span >is doing</span> <span >EVERYTHING</span> RIGHT,          
<span >why are the           
</span><span >CUSTOMERS </span><span >so</span> UPSET?</strong></span><span >”</span></p> </div>  <p>Well, this is what I think probably happened. First, they’ve been working on this since June 2009; the first real customer preview was in September 2010, and it’s now live, just over a month later. That’s not a series of incremental improvements, delivering discrete chunks of business value every few weeks or months. That’s the <a href="http://www.joelonsoftware.com/articles/fog0000000069.html">big</a> <a href="http://chadfowler.com/2006/12/27/the-big-rewrite">rewrite</a> wearing a not-very-convincing Agile disguise. </p>  <p>Second, one of the core tenets of the Agile Manifesto is “<strong>customer collaboration</strong> over contract negotiation” – and to get that right, you have to know who your customers really are, and <em>collaborate</em> with them. This is tricky, because to the developers, the ‘customer’ is probably the product owner – but in reality, the customer should be the person who’s going to use the product. Now a firm like SagePay probably can’t call their customers in off the street to collaborate on a big project like this – but they <em>can</em> talk to them.  </p>  <p>I think it’s really easy – particularly in big companies – to get this wrong. I have made this mistake many times. You launch version 1.0, you spend a couple of years babysitting it and fielding the support calls, and you end up thinking you know exactly what all your customers want… except you don’t, because <em>happy users never call support</em>. They just use the product and get on with their lives. You can find out what your users <em>don’t</em> like from support calls and complaints, but to find out what they <em>do</em> like, you need to get out there and talk to them, and it sounds like many of the features in the new SagePay system were based on feature requests and complaints from a vocal minority who weren’t really representative of the user base as a whole. It feels like you’re doing exactly the right thing, but you’re not actually <em>collaborating</em> with your customer.</p>  <div style="padding-bottom: 8px; line-height: 2em; padding-left: 8px; width: 240px; padding-right: 8px; float: right; font-size: large; padding-top: 8px">   <p align="center"><span >“<strong>REAL USERS </strong></span> 
don't care about      
<span ><strong>TEST DATA</strong>”</span></p> </div>  <p>Second – technical previews are all very well, but <strong>real users don’t care about test data</strong>. When I tried the new MySagePay tech preview last month, it had about a dozen transactions in it, from 2006, when we were testing an upgrade to our own payment system. That’s not a realistic test of the system, because there’s no incentive to actually do anything with it. The only way to get <strong>real feedback </strong>is to get <strong>real people </strong>to use the software to do <strong>real work </strong>– and <strong>you can’t do real work with test data</strong>. </p>  <p>In a nutshell, I think they missed the distinction between <strong>have we built the right thing?</strong> and <strong>have we built it right?</strong> </p>  <p>TDD, Continuous Integration, refactoring – these will all help you <strong>build it right, </strong>but agile’s also about making sure you’re building the <strong>right thing, </strong>and I think SagePay dropped the ball on this one.</p>  <p>Mat even says (my emphasis)</p>  <blockquote>   <p>“…any change introduces risk. … We might produce new software that performs identically to the old for a given payment protocol only to find that two thousand customers are <strong>using a non-documented “feature” of the old system that we’ve now written out."</strong></p> </blockquote>  <p>Well, that’s <em>exactly</em> what they did. On Friday, <a title="https://live.sagepay.com/txstatus/txstatus.asp" href="https://live.sagepay.com/txstatus/txstatus.asp">https://live.sagepay.com/txstatus/txstatus.asp</a> was returning real-time status for previous payment transactions – and now it’s gone. Vanished. What used to take 500 milliseconds in an automated script now takes a real person 90 seconds or so – including all that lovely horizontal scrolling they have to do.</p>  <p>Still, all is not lost. If SagePay really do have a clean, new architecture, and full test coverage, and a decent agile process in place, then it should be straightforward to respond to this customer feedback.<strong> Respond to change, instead of following a plan.</strong> Some tweaks at the presentation layer, maybe a couple of new properties on various view models and controllers, a handful of new methods on the supporting services, and it shouldn’t take long to deliver a product that combines the scalability and security of the new system with a UI that does exactly what the customers need. </p>  <p>Mat, if you’re reading this, I’d be really interested to hear what you guys did today whilst your support team were running around putting out fires. I’d love to see what your product backlog looks like right now, and how you’re condensing the torrent of feedback into user stories and work items. There’s not enough sharing in this industry, and if you and your team can be as open about things today as you were this time last week, you’ll probably help a whole bunch of people – including me – next time we find ourselves babysitting a tricky launch.</p>