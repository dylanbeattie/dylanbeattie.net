---
layout: post
title: A Post About Nothing, or, How I Learned To Stop Worrying And Love Nullable<T>
date: '2009-02-19T17:29:00.001Z'
author: Dylan Beattie
tags:
- dotnet
- c#
modified_time: '2017-03-18T15:03:45.178Z'
thumbnail: http://lh5.ggpht.com/_LV_l8kYLOwo/SaXpSs1BlEI/AAAAAAAAAKM/l1EVZVadYyc/s72-c/nullable_field_warning_thumb%5B3%5D.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-7295454224203070190.post-4433330579814948386
blogger_orig_url: http://www.dylanbeattie.net/2009/02/post-about-nothing-or-how-i-learned-to.html
---

<p><a href="http://tech-nous.blogspot.com/">Iain Holder</a> has an <a href="http://tech-nous.blogspot.com/2009/02/nullable.html">interesting post</a> about Nullable&lt;bool&gt; over on his blog, about the pitfalls of using nullable boolean values:</p>  <blockquote>   <p>What does null mean? It's got to mean something. You're either pregnant or you're not. You can't have a third state. A light switch is either on or off. If a light switch doesn't exist then it's potentially very dangerous. Almost as dangerous as having a nullable bool.</p> </blockquote> <a href="http://lh6.ggpht.com/_LV_l8kYLOwo/SaXpR_Eh8UI/AAAAAAAAAKk/5NvoV8hgXf4/s1600-h/nullable_field_warning%5B6%5D.jpg">   <p><strong></strong><a href="http://lh6.ggpht.com/_LV_l8kYLOwo/SaXpR_Eh8UI/AAAAAAAAAKs/X5d6m2VGyfA/s1600-h/nullable_field_warning%5B7%5D.jpg"><img title="nullable_field_warning" style="border-top-width: 0px; display: inline; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 20px 20px 0px; border-right-width: 0px" height="181" alt="nullable_field_warning" src="http://lh5.ggpht.com/_LV_l8kYLOwo/SaXpSs1BlEI/AAAAAAAAAKM/l1EVZVadYyc/nullable_field_warning_thumb%5B3%5D.jpg?imgmax=800" width="244" align="left" border="0" /></a></p> </a>Personally, I like null; I think it’s a wonderfully useful and often-misunderstood concept. Null is not dangerous <em>per se</em>, but used correctly, it can be a very effective warning sign. </a>  <p><strong>Null means <em>we don’t know – </em>or alternatively, <em>that question doesn’t make sense in this context</em>.</strong></p>  <p>To run with Iain’s example for a moment, let’s write a patient tracking system for a hospital; every time a patient arrives, we store their medical details in a database – blood type, next of kin, whether they’re pregnant, that kind of thing – so that the doctors can recommend appropriate treatment. All fields are required – no nulls allowed. It’s nice, simple, saves time, saves lives.</p>  <p>All very well, until an ambulance brings in an unconscious woman who might need X-rays. Is she pregnant? She might be – you don’t know; she came in alone, and she’s unconscious. The clock is ticking… an X-ray might save her life, but if she’s pregnant, it could harm her unborn child. If our patient system makes us choose true/false with no third option, we’re potentially making a very dangerous assumption either way. <strong>We need a third option, </strong>so when a doctor gets that patient’s chart, they see that <strong>we don’t know</strong>, and they can make sure they do a pregnancy test before sending the patient for X-rays or administering potentially dangerous medication.</p>  <p>I’m not arguing that NULL is the only solution to this problem. The <strong>problem</strong> is universal, and nullable fields is just one of many possible solutions. It happens to be a solution that’s natively supported in most databases and platforms, and I personally think the semantics of “null = don’t know” are rather nice. You may disagree – but you still need <em>something</em> to indicate when data in your model is potentially inaccurate or missing. </p>  <h3>Yes, null has no place in a perfect model…</h3>  <p>If your model (whether it’s an OO domain model or a relational database model) is complete, perfect, accurate and consistent, then you’re laughing. You will never have null values because your model maps perfectly onto the problem domain you’re working in, and you know every detail of every&#160; entity in that problem domain. You know every single customer’s date of birth; you have detailed records of the marketing preferences of every person in your database, and your model is so perfectly tuned to your business that there’s no sparse tables, no outer joins - </p>  <h3>…but there’s <em>no such thing </em>as a perfect model</h3>  <p>A model is an abstraction, and <a href="http://www.joelonsoftware.com/articles/LeakyAbstractions.html" target="_blank">abstractions always leak</a>. The real world isn’t domain-driven, or relational, or object-oriented – these paradigms are just ways of slicing and storing information about the real world that help us solve a problem or do a job. A lot of the time we’re making decisions based on the value of the information, but sometimes we need to make decisions based on whether that information is present or not. </p>  <p>A slightly less contrived real-life example might help. In one of the systems I work on, we have a nullable bit field in our main customer database for e-mail opt-in preferences. We interpret the true/false/null values as follows:</p>  <table cellspacing="0" cellpadding="0" width="575" border="1"><tbody>     <tr>       <td valign="top" width="59">True</td>        <td valign="top" width="514">This customer has <strong>agreed</strong> to received marketing information via e-mail</td>     </tr>      <tr>       <td valign="top" width="60">False</td>        <td valign="top" width="514">This customer has chosen <strong>not</strong> to receive marketing information via e-mail</td>     </tr>      <tr>       <td valign="top" width="61">Null</td>        <td valign="top" width="514">We<strong> have no record</strong> of this customer's preferences.</td>     </tr>   </tbody></table>  <p><a href="http://images.google.co.uk/images?hl=en&amp;q=null" target="_blank"><img title="This is the second Google Image search result for &quot;null&quot;. I have no idea what it is - something to do with magnetic topology - but I think it&#39;s quite beautiful. " style="border-top-width: 0px; display: inline; border-left-width: 0px; border-bottom-width: 0px; margin: 0px 0px 20px 20px; border-right-width: 0px" height="240" alt="This is the second Google Image search result for &quot;null&quot;. I have no idea what it is - something to do with magnetic topology - but I think it&#39;s quite beautiful. " src="http://solar.physics.montana.edu/colinb/trace_null.gif" width="217" align="right" border="0" /></a>When we send out e-mail newsletters, we only include the customers whose field is actually true – that’s the point of opt-in marketing, right? Any customer can log in and change their preferences at any time, so the customers who have opted-out (i.e. their value is false), we leave them alone – they’ve said they don’t want to get hassled, so we don’t hassle them, and if they change their mind, they can log in and reactivate their newsletter any time.</p>  <p>So what about <strong>null</strong>? Well, when a customer logs in, they get a personalized welcome page. If we see that their opt-in field is null, we add a message to this page saying “Hey, we have this e-mail newsletter you can subscribe to - could you take a moment to let us know whether you’re interested?” The point is, as soon as they’ve expressed a preference <strong>one way or the other</strong>, we’ll stop showing them this message, so a customer should only see this message the first few times they’ve logged in. We end up with better data; they don’t get unwanted e-mail, and everyone’s happy.</p>  <p></p>  <p></p>  <p><small>The weird swirly picture there turned up in a <a href="http://images.google.co.uk/images?hl=en&amp;q=null" target="_blank">Google Images search for “null”</a> – I don’t know enough about magnetic topology to have the faintest idea what it is, but it’s quite beautiful, don’t you think? Image © <a href="http://solar.physics.montana.edu/colinb/">Colin Beveridge</a></small></p>  