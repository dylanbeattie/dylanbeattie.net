---
layout: post
title: 'Dynamics CRM Online: Any SMTP Server You Like! (as long as it''s Gmail or
  Yahoo)'
date: '2015-08-11T14:19:00.001+01:00'
author: Dylan Beattie
tags: 
modified_time: '2015-08-11T14:53:57.388+01:00'
thumbnail: http://lh3.googleusercontent.com/-Btn5rKsPFXI/Vcn2XXXENhI/AAAAAAAADvo/DnPNWgfX1uo/s72-c/image_thumb%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-7295454224203070190.post-6935018615159389858
blogger_orig_url: http://www.dylanbeattie.net/2015/08/dynamics-crm-online-any-smtp-server-you.html
redirect_from: "/2015/08/dynamics-crm-online-any-smtp-server-you.html"

---

<p><strong>UPDATE: I take it all back. </strong>Following a really useful call from Dynamics CRM support, it turns out there are three different mail integration scenarios, only there's no reference to the third one in the CRM Online configuration screens.</p>  <ol>   <li>Server-side sync using Exchange</li>    <li>Server-side sync using POP3/SMTP - this is the one that's restricted to Yahoo/Gmail, presumably because it IS doing something very clever.</li>    <li>Dynamics CRM Email Relay - this is a completely separate tool that you need to download and install, and use it to configure your email routing. </li> </ol>  <p>I'm going through the mail relay config as we speak - will let you know how it goes. Sorry, Microsoft. :)</p>  <hr />  <p>We are doing a lot of work at the moment with Microsoft Dynamics CRM Online. It's generally very nice - as a business tool, it's excellent; the UI is great, it's a good fit for our requirements, and despite a couple of headaches caused by the restrictions of the CRM Online hosting environment, we've now got a pretty elegant two-way data sync system up and running using EasyNetQ and webhooks.</p>  <p>Now, one of our key requirements for CRM is being able to send email to our customers. Yeah, I know - audacious, right? CRM Online is our first foray into the cloudy world of Microsoft Office 365, and all the rest of our infrastructure (Exchange, Active Directory, etc.) is still hosted on-premise. For testing and staging systems, we use <a href="http://mailtrap.io/"><strong>mailtrap.io</strong></a> - a really slick service that will accept incoming mail and store it so you can test things are relaying properly without actually sending any real emails. For production, we use <a href="http://mandrillapp.com/"><strong>Mandrill</strong></a>, which is a commercial mail relay service - high availability, reputation management, excellent delivery statistics. We send about a million emails a month through Mandrill, and it works beautifully. </p>  <p>So... this morning I log into CRM Online, go into Settings =&gt; Email Configuration =&gt; New POP3/SMTP Server Profile. Looks pretty straightforward, right? I enter some details, click &quot;save&quot; and get this:</p>  <p><a href="http://lh3.googleusercontent.com/-2_qoxTVxfXw/Vcn2Wwtg8yI/AAAAAAAADvk/fFhIrzTZNg8/s1600-h/image%25255B4%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="image" src="http://lh3.googleusercontent.com/-Btn5rKsPFXI/Vcn2XXXENhI/AAAAAAAADvo/DnPNWgfX1uo/image_thumb%25255B2%25255D.png?imgmax=800" width="511" height="128" /></a></p>  <p>Weird. I don't want to set up server-side synchronization - I just want to send email. So I start poking around, Googling, that kind of thing, and find <a href="https://community.dynamics.com/crm/b/dynamicscrmtipoftheday/archive/2015/03/11/tip-342-demystifying-pop3-smtp-for-crm-online">this article</a>, which says:</p>  <blockquote>   <p>You may have read in <a href="https://technet.microsoft.com/en-us/library/dn531050.aspx">the documentation</a> that GMail and Yahoo are listed as supported pop3/smtp providers for Microsoft Dynamics CRM Online and</p>    <p><strong>&quot;Although other POP3/SMTP systems may work with Microsoft Dynamics CRM, those systems were not been tested by Microsoft and are not supported.&quot;</strong></p>    <p>Let’s be clear about “<strong>not supported</strong>“. In this context it means precisely “you will not be able to go past server profile screen as we will reject any pop3/smtp provider that is not GMail or Yahoo.”</p> </blockquote>  <p>And that is <em>exactly what the email relay screen does<strong>. </strong></em>If you enter any value other than &quot;smtp.gmail.com&quot; or &quot;smtp.mail.yahoo.com&quot; in the Outgoing Server Location field, you get the &quot;unsupported email server&quot; message. I've even tried modifying the configuration using the SDK instead of the UI, but get the same response - &quot;the email server is unsupported&quot;.</p>  <p>There's two possibilities here:</p>  <ol>   <li>Microsoft have worked closely with Yahoo and GMail to provide first-class business email support, with all sorts of clever features and proprietary extensions that aren't supported by any other SMTP mail servers. <strong>(UPDATE - yes, it appears this is more-or-less what they've done. See above.)</strong></li>    <li><strike>Somebody has arbitrarily decided to support GMail and Yahoo and exclude all other SMTP servers. Including, by the way, Hotmail (owned by Microsoft), Outlook.com (owned by Microsoft), and our on-premise SMTP relay (powered by Microsoft Exchange)</strike> </li> </ol>  <p>If I were a betting man, I know which one I'd be putting money on. I'm really disappointed about this. CRM Online isn't a toy. It's a seriously powerful platform, with a hefty price tag attached... and just when everything is going really nicely, something like this comes along and our beautiful product vision is completely hamstrung by the fact that if we want to email our customers, we need to do it via GMail or Yahoo - and there's absolutely no rational justification for this.</p>  <p>Anyone else encountered with this particular restriction? Anyone have any bright ideas as to how we can work around it?</p>  