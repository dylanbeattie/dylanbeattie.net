---
layout: post
title: SECURITY_DENIED_BY_MIMEMAP Hosting WCF Services in IIS 7 Classic Mode
date: '2012-08-18T11:55:00.001+01:00'
author: Dylan Beattie
tags: 
modified_time: '2012-08-18T11:55:08.787+01:00'
thumbnail: http://lh6.ggpht.com/-TcAgrRN8tH8/UC90g0crRfI/AAAAAAAAALw/vTUC5l1Wqv4/s72-c/image_thumb%25255B1%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-7295454224203070190.post-6285184536518041003
blogger_orig_url: http://www.dylanbeattie.net/2012/08/securitydeniedbymimemap-hosting-wcf.html
---

<p>Another one of those gotchas where the error message doesn't actually have anything to do with the problem...</p>  <p>One of our apps includes a WCF service endpoint that's called by some of our other systems. This works perfectly in production, but when I fired it up locally this morning to fix a bug, I just couldn't get the thing to run properly - the right handlers were mapped, the file permissions were OK, but every time I pointed a browser at http://www.mysite.com.local/some_app/endpoint.svc , I got an HTTP 403 Forbidden.</p>  <p>Turning on IIS failed request tracing gave me one of those incredibly detailed XML dump files:</p>  <p><a href="http://lh5.ggpht.com/-P1dGJHUSTcU/UC90gIIxzeI/AAAAAAAAALs/ipvWBucTdb0/s1600-h/image%25255B3%25255D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/-TcAgrRN8tH8/UC90g0crRfI/AAAAAAAAALw/vTUC5l1Wqv4/image_thumb%25255B1%25255D.png?imgmax=800" width="644" height="304" /></a>So... SECURITY_DENIED_BY_MIMEMAP. Which is a little odd, because I was pretty sure MIME mapping only applied to static content - but sure enough, I tried setting up a MIME mapping for .svc files - mapped to application/xml. This didn't work - IIS just sent me the .svc definition file instead of actually executing it...</p>  <p>Turns out that the problem is our production servers are 32-bit and our development boxes are x64 - and I hadn't gone into the IIS Application Pool for this app and enabled 32-bit applications. </p>  <p><a href="http://lh5.ggpht.com/-HtHp5HqBOgQ/UC90hlBDT6I/AAAAAAAAAL8/VjkesbSkIkg/s1600-h/image%25255B12%25255D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/-5ki9_UDRCIA/UC90iQcphII/AAAAAAAAAME/QDpmUeApA-k/image_thumb%25255B6%25255D.png?imgmax=800" width="454" height="554" /></a></p>  <p>Quite why this results in the misleading MIME type error is one of those little mysteries that makes IIS such fun to work with, but that solved it for me.</p>  