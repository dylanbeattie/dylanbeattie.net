---
layout: post
title: Mapping a Drive Letter to a Subversion Repository with CollabNet, WebDrive
  and WebDAV
date: '2011-01-10T19:26:00.001Z'
author: Dylan Beattie
tags:
- tools
- subversion
- coding
modified_time: '2011-01-10T19:26:48.780Z'
thumbnail: http://lh6.ggpht.com/_de7B8BtZZIw/TStdcb8ZV8I/AAAAAAAAAEs/Qxj4cKZDaF4/s72-c/image_thumb%5B2%5D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-7295454224203070190.post-3393702070528790059
blogger_orig_url: http://www.dylanbeattie.net/2011/01/mapping-drive-letter-to-subversion.html
redirect_from: "/2011/01/mapping-drive-letter-to-subversion.html"

---

<p>This is quite neat. As part of a business-wide agile initiative, I’m looking into solutions for storing and collaborating on documents – something that gives *me* the history and auditing capabilities of something like Subversion, but gives the rest of the team something clean and easy that fits well with current working practises.</p>  <p>So… mapped drive letters. Everyone knows about drive letters – “just stick it on the R: drive” is nice and easy, and as long as everyone’s R: drive points to the same place and the fileserver behind it’s getting backed up, you’re sorted. Unless you want to revert a document that’s been corrupted, or accidentally deleted, or you just want to get back an earlier revision because you realize you’ve done something dumb. Then you need to mess around with tapes and stuff, and that’s just no fun at all.</p>  <p>Plus, of course, we have a wiki, which isn’t much fun to edit because the constant round-tripping from WYSIWYG-&gt;markup-&gt;HTML-&gt;WYSIWYG tends to clobber newlines and formatting, but it *is* a great place to keep stuff because it doesn’t get lost.</p>  <p>So, requirements for document storage:</p>  <ol>   <li>As easy to use as a drive letter. </li>    <li>Security. Windows / LDAP authentication to control who can read and who can write. </li>    <li>Revision history – just a record of who made changes, and when. </li>    <li>Ability to revert changes to an earlier revision </li>    <li>HTTP accessible so you can read stuff with just a web browser. </li> </ol>  <p>There’s two things you can do with a list of requirements like that… speak to vendors, or hack something together yourself. You wanna speak to vendors, you go ahead; I shan’t stop you. Still here? Good. Let’s hack.</p>  <h4>1. Install Subversion on the server. </h4>  <p>For this, I’m using the <a href="http://www.collab.net/products/subversion/whatsnew.html">CollabNet Subversion Edge</a> stack – a single installer combining Subversion, Apache and the ViewVC web front-end. It’s very, very neat, and (having done this the hard way) <em>much</em> easier than setting up mod_dav_svn yourself. Once it’s up, use the web interface (linked from the Start menu on your server) to set up a new repo – call it doc_repo – and then verify that if you browse to <a href="http://myserver/viewvc/doc_repo/">http://myserver/viewvc/doc_repo/</a> you get the ViewVC web front-end view of your new, empty repository.</p>  <p>If you’re after Windows/LDAP authentication, that’s also configurable from the Subversion Edge web interface – and CollabNet has <a href="http://blogs.open.collab.net/svn/2009/03/subversion-with-apache-and-ldap-updated.html">detailed notes on how this works</a>.</p>  <p><a href="http://lh4.ggpht.com/_de7B8BtZZIw/TStdb3ntWII/AAAAAAAAAEo/JHxonYR9BpQ/s1600-h/image%5B4%5D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/_de7B8BtZZIw/TStdcb8ZV8I/AAAAAAAAAEs/Qxj4cKZDaF4/image_thumb%5B2%5D.png?imgmax=800" width="573" height="741" /></a></p>  <h4>2. Install <strong><a href="http://www.webdrive.com/products/webdrive/index.html">WebDrive</a></strong> on your workstation.</h4>  <p>This is a commercial package that’ll map a Windows drive letter to a WebDAV share. This is supposedly something that Windows is capable of doing natively, but I have never, ever got this to work, not even once. I would be glad to hear recommendations for free / open-source alternatives for this, since it’s currently the only bit of this set-up that costs money. There’s apparently also a <a href="http://www.novell.com/coolsolutions/qna/999.html">netdrive.exe floating around</a> but licensing for NetDrive seems to be a little confused.</p>  <h4>3. Hack the Subversion config file. </h4>  <p>On the server, open up <font face="Consolas">C:\Program Files\Subversion\data\conf\svn_viewvc_httpd.conf</font>. We’re not going to edit this file – you’ll need to find the bit that looks like:</p>  <blockquote>   <p>&lt;Location /svn/&gt;      <br />&#160;&#160; DAV svn       <br />&#160;&#160; SVNParentPath &quot;C:\Program Files\Subversion\data\repositories&quot;       <br />&#160;&#160; SVNReposName &quot;CollabNet Subversion Repository&quot;       <br />&#160; AuthzSVNAccessFile &quot;C:\Program Files\Subversion\data/conf/svn_access_file&quot;       <br />&#160; SVNListParentPath On       <br />&#160; Allow from all       <br />&#160; AuthType Basic       <br />&#160; AuthName &quot;CollabNet Subversion Repository&quot;       <br />&#160; AuthBasicProvider csvn-file-users ldap-users       <br />&#160; Require valid-user       <br />&lt;/Location&gt;</p> </blockquote>  <p>and copy it. Then open up <font face="Consolas">C:\Program Files\Subversion\data\conf\httpd.conf</font> – which is the regular Apache configuration file – and paste the copied section right at the end, and make the following changes:</p>  <blockquote>   <p><font color="#a5a5a5"># Change Location to be the URL path of your WebDAV repo – I’ve used <em>webdrive here         <br /></em></font>&lt;Location<font color="#4bacc6"><strong> /webdrive/</strong></font>&gt;       <br />&#160;&#160;&#160; DAV svn       <br />&#160;&#160;&#160; SVNParentPath &quot;C:\Program Files\Subversion\data\repositories&quot;       <br />&#160;&#160;&#160; SVNReposName &quot;Subversion WebDAV&quot;       <br />&#160;&#160;&#160; AuthzSVNAccessFile &quot;C:\Program Files\Subversion\data/conf/svn_access_file&quot;       <br />&#160;&#160;&#160; SVNListParentPath On       <br />&#160;&#160;&#160; Allow from all       <br />&#160;&#160;&#160; AuthType Basic       <br />&#160;&#160;&#160; AuthName &quot;Document Repository&quot;       <br />&#160;&#160;&#160; AuthBasicProvider csvn-file-users ldap-users       <br />&#160;&#160;&#160; Require valid-user       <br /><font color="#a5a5a5"># Add the two lines below </font>      <br /><font color="#4bacc6"><strong>&#160;&#160;&#160; ModMimeUsePathInfo on          <br />&#160;&#160;&#160; SVNAutoversioning on           <br /></strong></font>&lt;/Location&gt;</p> </blockquote>  <p>Now restart the web server (using ApacheMonitor.exe from <font face="Consolas">C:\Program Files\Subversion\bin\ </font>on your server) and check that you can see <a href="http://myserver/webdrive/">http://myserver/webdrive/</a> in a normal Web browser – the screen should say “Collection of Repositories” with your doc_repo repository listed underneath.</p>  <h4>4. Connect WebDrive to your new WebDEV-Enabled Repository</h4>  <p>Nearly there. Finally, fire up WebDrive on your workstation and create a new connection. Enter the Site Address/URL as <a href="http://myserver/webdrive/doc_repo/">http://myserver/webdrive/doc_repo/</a> – note that you <strong>must put the repo name in the URL otherwise WebDrive will complain with an error something like:</strong></p>  <blockquote>   <pre><code>Unable to connect to server, error information below

Error: Socket receive failure (4507)
Operation: Connecting to server
Winsock Error: WSAECONNRESET (10054)</code></pre>
</blockquote>



<p>Correct settings will look something like this:</p>

<p><a href="http://lh6.ggpht.com/_de7B8BtZZIw/TStdcmWs2pI/AAAAAAAAAEw/iHMCiXNNDqE/s1600-h/image%5B10%5D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/_de7B8BtZZIw/TStdc24_UMI/AAAAAAAAAE0/XgIpgoUC4Fg/image_thumb%5B6%5D.png?imgmax=800" width="644" height="442" /></a></p>

<p>Hit Connect, and Windows explorer will fire up a new N: drive window pointing at your repo.</p>

<h4>5. Witness the Awesome Power of Autoversioning!</h4>

<p>Create an empty folder, create a text file in it, then browse to <a href="http://myserver/viewvc/doc_repo/">http://myserver/viewvc/doc_repo/</a> and you should see your new folder, and file, along with the Subversion history recording who created the file and when:</p>

<p><a href="http://lh4.ggpht.com/_de7B8BtZZIw/TStdddljLwI/AAAAAAAAAE4/KwwcWACaGr0/s1600-h/image%5B14%5D.png"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top: 0px; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://lh6.ggpht.com/_de7B8BtZZIw/TStddx7f64I/AAAAAAAAAE8/KtAeE9nk3UA/image_thumb%5B8%5D.png?imgmax=800" width="869" height="553" /></a></p>

<p>I like that a lot.</p>  